// import npm libs
import { useState, useEffect } from "react";
import { Link } from "react-router-dom";
import { useMediaQuery } from "react-responsive";
// import local libs
import { ToolbarProps } from "../../types";
import Head from "../Head";
import basepathes from "../../basePathes.json";
// import styles
import styles from "./Toolbar.module.scss";

const Toolbar = (props: ToolbarProps) => {
  // You can use other methods of change state
  // use var names: toolbarActive: boolean, setToolbarActive(boolean)
  const mobileToolbar = useMediaQuery({ query: "(max-width: 576px)" });
  const absToolbar = useMediaQuery({ query: "(max-width: 800px)" });
  const [toolbarActive, setToolbarActive] = useState<boolean>(true);

  useEffect(() => {
    (mobileToolbar || absToolbar) && setToolbarActive(false);
  }, [absToolbar, mobileToolbar]);

  return toolbarActive ? (
    <aside className={styles.toolbar + " " + styles.toolbarActive}>
      <Head
        logo={false}
        icon={false}
        currentState={toolbarActive}
        setCurrentState={setToolbarActive}
      />
      {props.children}
    </aside>
  ) : mobileToolbar ? (
    <nav className={styles.toolbarMobile}>
      <Link to={basepathes.home}>
        <svg
          width="32"
          height="29"
          viewBox="0 0 32 29"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path d="M17.5085 0.615818C16.6754 -0.20527 15.3246 -0.205275 14.4915 0.615818L0.312419 14.5902C-0.10414 15.0007 -0.10414 15.6664 0.312419 16.0769C0.728979 16.4874 1.40435 16.4874 1.82091 16.0769L3.2 14.7177V25.8462C3.2 27.588 4.63269 29 6.4 29H25.6C27.3673 29 28.8 27.588 28.8 25.8462V14.7177L30.1791 16.0769C30.5956 16.4874 31.271 16.4874 31.6876 16.0769C32.1041 15.6664 32.1041 15.0007 31.6876 14.5902L26.6667 9.64176V2.71835C26.6667 2.13775 26.1891 1.66708 25.6 1.66708H23.4667C22.8776 1.66708 22.4 2.13775 22.4 2.71835V5.4367L17.5085 0.615818ZM26.6667 12.6152V25.8462C26.6667 26.4268 26.1891 26.8975 25.6 26.8975H6.4C5.8109 26.8975 5.33333 26.4268 5.33333 25.8462V12.6152L16 2.10253L26.6667 12.6152Z" />
        </svg>
      </Link>
      <Link to={basepathes.settings}>
        <svg
          width="32"
          height="32"
          viewBox="0 0 32 32"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path d="M16.0001 9.50842C12.4149 9.50842 9.50854 12.4148 9.50854 16C9.50854 19.5851 12.4149 22.4915 16.0001 22.4915C19.5852 22.4915 22.4916 19.5851 22.4916 16C22.4916 12.4148 19.5852 9.50842 16.0001 9.50842ZM11.5085 16C11.5085 13.5193 13.5195 11.5084 16.0001 11.5084C18.4807 11.5084 20.4916 13.5193 20.4916 16C20.4916 18.4806 18.4807 20.4915 16.0001 20.4915C13.5195 20.4915 11.5085 18.4806 11.5085 16Z" />
          <path d="M19.5929 2.68675C18.5371 -0.895585 13.4629 -0.895583 12.4071 2.68675L12.2194 3.32359C11.9049 4.39039 10.6864 4.8951 9.70974 4.3631L9.12671 4.04552C5.84699 2.25905 2.25905 5.847 4.04552 9.12671L4.3631 9.70974C4.8951 10.6864 4.39039 11.9049 3.32358 12.2194L2.68675 12.4071C-0.895585 13.4629 -0.895583 18.5371 2.68675 19.5929L3.32358 19.7806C4.39038 20.0951 4.8951 21.3136 4.3631 22.2903L4.04552 22.8733C2.25906 26.153 5.84699 29.741 9.12671 27.9545L9.70974 27.6369C10.6864 27.1049 11.9049 27.6096 12.2194 28.6764L12.4071 29.3133C13.4629 32.8956 18.5371 32.8956 19.5929 29.3132L19.7806 28.6764C20.0951 27.6096 21.3136 27.1049 22.2903 27.6369L22.8733 27.9545C26.153 29.741 29.7409 26.153 27.9545 22.8733L27.6369 22.2903C27.1049 21.3136 27.6096 20.0951 28.6764 19.7806L29.3132 19.5929C32.8956 18.5371 32.8956 13.4629 29.3132 12.4071L28.6764 12.2194C27.6096 11.9049 27.1049 10.6864 27.6369 9.70974L27.9545 9.12671C29.741 5.84698 26.153 2.25906 22.8733 4.04553L22.2903 4.3631C21.3136 4.8951 20.0951 4.39039 19.7806 3.32359L19.5929 2.68675ZM14.3255 3.2522C14.8176 1.5826 17.1824 1.5826 17.6745 3.2522L17.8622 3.88903C18.5369 6.17799 21.1513 7.26093 23.2469 6.11945L23.83 5.80187C25.3585 4.96926 27.0307 6.64147 26.1981 8.17002L25.8806 8.75306C24.7391 10.8487 25.822 13.4631 28.111 14.1378L28.7478 14.3255C30.4174 14.8176 30.4174 17.1824 28.7478 17.6745L28.111 17.8622C25.822 18.5369 24.7391 21.1513 25.8806 23.2469L26.1981 23.83C27.0307 25.3585 25.3585 27.0307 23.83 26.1981L23.2469 25.8806C21.1513 24.7391 18.5369 25.822 17.8622 28.111L17.6745 28.7478C17.1824 30.4174 14.8176 30.4174 14.3255 28.7478L14.1378 28.111C13.4631 25.822 10.8487 24.7391 8.75305 25.8806L8.17002 26.1981C6.64147 27.0307 4.96926 25.3585 5.80187 23.83L6.11945 23.247C7.26092 21.1514 6.17799 18.5369 3.88903 17.8622L3.2522 17.6745C1.5826 17.1824 1.5826 14.8176 3.2522 14.3255L3.88903 14.1378C6.17799 13.4631 7.26093 10.8487 6.11945 8.75306L5.80187 8.17003C4.96926 6.64147 6.64147 4.96926 8.17002 5.80187L8.75305 6.11945C10.8486 7.26093 13.4631 6.17799 14.1378 3.88903L14.3255 3.2522Z" />
        </svg>
      </Link>
      <Link to={basepathes.edit}>
        <svg
          width="32"
          height="32"
          viewBox="0 0 32 32"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path d="M24.2929 0.292893C24.6834 -0.097631 25.3166 -0.097631 25.7071 0.292893L31.7071 6.29289C32.0976 6.68341 32.0976 7.31658 31.7071 7.7071L11.7071 27.7071C11.6114 27.8028 11.4971 27.8782 11.3714 27.9284L1.37142 31.9284C1 32.077 0.575784 31.9899 0.292922 31.7071C0.0100598 31.4242 -0.0770142 31 0.0715524 30.6286L4.07155 20.6286C4.12184 20.5028 4.19716 20.3886 4.29292 20.2929L24.2929 0.292893ZM22.4142 5L27 9.58578L29.5858 6.99999L25 2.41421L22.4142 5ZM25.5858 11L21 6.41421L8.00002 19.4142V20H9.00002C9.55231 20 10 20.4477 10 21V22H11C11.5523 22 12 22.4477 12 23V24H12.5858L25.5858 11ZM6.06333 21.3509L5.85227 21.5619L2.79508 29.2049L10.438 26.1477L10.6491 25.9367C10.2699 25.7946 10 25.4288 10 25V24H9.00002C8.44774 24 8.00002 23.5523 8.00002 23V22H7.00002C6.57121 22 6.20544 21.7301 6.06333 21.3509Z" />
        </svg>
      </Link>
      <Link to={basepathes.view}>
        <svg
          width="32"
          height="32"
          viewBox="0 0 32 32"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path d="M16 16C20.4183 16 24 12.4183 24 8C24 3.58172 20.4183 0 16 0C11.5817 0 8 3.58172 8 8C8 12.4183 11.5817 16 16 16ZM21.3333 8C21.3333 10.9455 18.9455 13.3333 16 13.3333C13.0545 13.3333 10.6667 10.9455 10.6667 8C10.6667 5.05448 13.0545 2.66667 16 2.66667C18.9455 2.66667 21.3333 5.05448 21.3333 8Z" />
          <path d="M32 29.3333C32 32 29.3333 32 29.3333 32H2.66667C2.66667 32 0 32 0 29.3333C0 26.6667 2.66667 18.6667 16 18.6667C29.3333 18.6667 32 26.6667 32 29.3333ZM29.3333 29.324C29.3295 28.666 28.9233 26.6945 27.1144 24.8856C25.375 23.1463 22.1043 21.3333 16 21.3333C9.89568 21.3333 6.62494 23.1463 4.88559 24.8856C3.07668 26.6945 2.67047 28.666 2.66667 29.324H29.3333Z" />
        </svg>
      </Link>
      <button
        onClick={() => setToolbarActive(!toolbarActive)}
        className={styles.btnToogleSidebar}
      >
        <svg
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path d="M12.3529 2.33824C12.1324 2.22059 11.8676 2.22059 11.6471 2.33824L0.397059 8.33824C0.152661 8.46858 0 8.72302 0 9C0 9.27698 0.152661 9.53142 0.397059 9.66176L4.78125 12L0.397059 14.3382C0.152661 14.4686 0 14.723 0 15C0 15.277 0.152661 15.5314 0.397059 15.6618L11.6471 21.6618C11.8676 21.7794 12.1324 21.7794 12.3529 21.6618L23.6029 15.6618C23.8473 15.5314 24 15.277 24 15C24 14.723 23.8473 14.4686 23.6029 14.3382L19.2188 12L23.6029 9.66176C23.8473 9.53142 24 9.27698 24 9C24 8.72302 23.8473 8.46858 23.6029 8.33824L12.3529 2.33824ZM17.625 12.85L21.6562 15L12 20.15L2.34375 15L6.375 12.85L11.6471 15.6618C11.8676 15.7794 12.1324 15.7794 12.3529 15.6618L17.625 12.85ZM12 14.15L2.34375 9L12 3.85L21.6562 9L12 14.15Z" />
        </svg>
      </button>
    </nav>
  ) : (
    <button
      className={styles.toolbarBtn}
      onClick={() => setToolbarActive(!toolbarActive)}
    >
      <svg
        width="24"
        height="24"
        viewBox="0 0 26 26"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          fillRule="evenodd"
          clipRule="evenodd"
          d="M12.3529 2.33824C12.1324 2.22059 11.8676 2.22059 11.6471 2.33824L0.397059 8.33824C0.152661 8.46858 0 8.72302 0 9C0 9.27698 0.152661 9.53142 0.397059 9.66176L4.78125 12L0.397059 14.3382C0.152661 14.4686 0 14.723 0 15C0 15.277 0.152661 15.5314 0.397059 15.6618L11.6471 21.6618C11.8676 21.7794 12.1324 21.7794 12.3529 21.6618L23.6029 15.6618C23.8473 15.5314 24 15.277 24 15C24 14.723 23.8473 14.4686 23.6029 14.3382L19.2188 12L23.6029 9.66176C23.8473 9.53142 24 9.27698 24 9C24 8.72302 23.8473 8.46858 23.6029 8.33824L12.3529 2.33824ZM17.625 12.85L21.6562 15L12 20.15L2.34375 15L6.375 12.85L11.6471 15.6618C11.8676 15.7794 12.1324 15.7794 12.3529 15.6618L17.625 12.85ZM12 14.15L2.34375 9L12 3.85L21.6562 9L12 14.15Z"
        />
      </svg>
    </button>
  );
};

export default Toolbar;
